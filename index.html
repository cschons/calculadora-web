<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <!-- Importando o Tailwind CSS para o design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Importando a fonte Inter do Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Definindo a fonte Inter como padrão e um toque de anti-aliasing para melhor leitura */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Efeito de clique sutil para os botões */
        .calc-button:active {
            transform: scale(0.95);
            filter: brightness(1.2);
        }
    </style>
</head>
<body class="bg-gray-900 flex items-center justify-center h-screen">

    <!-- Container principal da calculadora -->
    <div class="w-full max-w-sm mx-auto bg-gray-800 rounded-2xl shadow-lg p-6 space-y-6">
        
        <!-- Tela de exibição do resultado -->
        <div class="bg-gray-900 rounded-lg p-4 text-white text-right break-words">
            <div id="history" class="text-gray-400 text-sm h-6"></div>
            <div id="display" class="text-5xl font-bold h-14">0</div>
        </div>

        <!-- Grid dos botões da calculadora -->
        <div class="grid grid-cols-4 gap-3">
            
            <!-- Linha 1 -->
            <button onclick="clearDisplay()" class="calc-button text-2xl font-semibold bg-gray-600 text-white p-4 rounded-lg transition-transform duration-100">AC</button>
            <button onclick="appendOperator('/')" class="calc-button text-2xl font-semibold bg-orange-500 text-white p-4 rounded-lg transition-transform duration-100">÷</button>
            <button onclick="appendOperator('*')" class="calc-button text-2xl font-semibold bg-orange-500 text-white p-4 rounded-lg transition-transform duration-100">×</button>
            <button onclick="backspace()" class="calc-button text-2xl font-semibold bg-gray-600 text-white p-4 rounded-lg transition-transform duration-100">⌫</button>

            <!-- Linha 2 -->
            <button onclick="appendNumber('7')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">7</button>
            <button onclick="appendNumber('8')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">8</button>
            <button onclick="appendNumber('9')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">9</button>
            <button onclick="appendOperator('-')" class="calc-button text-2xl font-semibold bg-orange-500 text-white p-4 rounded-lg transition-transform duration-100">-</button>

            <!-- Linha 3 -->
            <button onclick="appendNumber('4')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">4</button>
            <button onclick="appendNumber('5')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">5</button>
            <button onclick="appendNumber('6')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">6</button>
            <button onclick="appendOperator('+')" class="calc-button text-2xl font-semibold bg-orange-500 text-white p-4 rounded-lg transition-transform duration-100">+</button>
            
            <!-- Linha 4 -->
            <button onclick="appendNumber('1')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">1</button>
            <button onclick="appendNumber('2')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">2</button>
            <button onclick="appendNumber('3')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">3</button>
            <button onclick="calculateResult()" class="calc-button row-span-2 text-2xl font-semibold bg-orange-500 text-white p-4 rounded-lg transition-transform duration-100">=</button>

            <!-- Linha 5 -->
            <button onclick="appendNumber('0')" class="calc-button col-span-2 text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">0</button>
            <button onclick="appendNumber('.')" class="calc-button text-2xl font-semibold bg-gray-700 text-white p-4 rounded-lg transition-transform duration-100">.</button>

        </div>
    </div>

    <script>
        // Selecionando os elementos do display no HTML
        const display = document.getElementById('display');
        const historyDisplay = document.getElementById('history');

        // Variável para armazenar a expressão atual
        let currentExpression = '';
        let resultCalculated = false;

        // Função para adicionar um número ao display
        function appendNumber(number) {
            // Se um resultado acabou de ser calculado, limpa o display antes de adicionar um novo número
            if (resultCalculated) {
                currentExpression = '';
                resultCalculated = false;
            }
            // Evita que o display comece com '0' antes de outros números
            if (currentExpression === '0' && number !== '.') {
                currentExpression = number;
            } else {
                currentExpression += number;
            }
            updateDisplay();
        }

        // Função para adicionar um operador
        function appendOperator(operator) {
            // Se a expressão estiver vazia, não faz nada
            if (currentExpression === '') return;
            
            resultCalculated = false;
            const lastChar = currentExpression.slice(-1);
            
            // Impede a adição de múltiplos operadores em sequência
            if (['+', '-', '*', '/'].includes(lastChar)) {
                 // Substitui o último operador pelo novo
                currentExpression = currentExpression.slice(0, -1) + operator;
            } else {
                currentExpression += operator;
            }
            updateDisplay();
        }

        // Função para limpar todo o display e a memória
        function clearDisplay() {
            currentExpression = '';
            historyDisplay.innerText = '';
            display.innerText = '0';
        }

        // Função para apagar o último caractere
        function backspace() {
            if (resultCalculated) {
                clearDisplay();
                return;
            }
            currentExpression = currentExpression.slice(0, -1);
            if (currentExpression === '') {
                display.innerText = '0';
            } else {
                updateDisplay();
            }
        }
        
        // Função para atualizar o que é mostrado na tela
        function updateDisplay() {
            // Substitui os operadores de código por símbolos mais amigáveis
            const friendlyExpression = currentExpression.replace(/\*/g, '×').replace(/\//g, '÷');
            display.innerText = friendlyExpression || '0';
        }

        // Função para calcular o resultado final
        function calculateResult() {
            // Se não houver expressão, não faz nada
            if (currentExpression === '') return;

            try {
                // 'eval' é uma função poderosa que calcula o resultado de uma string.
                // ATENÇÃO: É ótima para projetos simples como este, mas pode ser insegura
                // em aplicações reais e complexas se a entrada não for controlada.
                const result = eval(currentExpression);
                
                // Exibe a expressão calculada no histórico
                historyDisplay.innerText = currentExpression.replace(/\*/g, '×').replace(/\//g, '÷') + ' =';
                // Exibe o resultado no display principal
                display.innerText = result;
                // Armazena o resultado para poder ser usado em cálculos futuros
                currentExpression = result.toString();
                resultCalculated = true;

            } catch (error) {
                // Em caso de erro na expressão (ex: 5+*3), mostra uma mensagem de erro.
                display.innerText = 'Erro';
                currentExpression = '';
                historyDisplay.innerText = '';
            }
        }

    </script>

</body>
</html>
